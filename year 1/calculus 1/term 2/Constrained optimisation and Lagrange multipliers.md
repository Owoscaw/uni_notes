A common problem involves determining the maximum or minimum of some function $f(x,y)$ subject to a constraint $g(x,y)=0$. Example:![[rectangle example]]
# Method of Lagrange multipliers:

Find stationary points of $f(x,y)$ subject to the constraint $g(x,y)=0$. When $g$ is in this form, $g=0$ is a level set, so $\underline\nabla g\cdot\underline{\hat n}=0$ where $\underline{\hat n}$ is the vector tangent to the path set out by $g$. At the maximum on this path, we know that $\underline\nabla f\cdot\underline{\hat n}=0$. Therefore we know that $\underline\nabla g,\underline\nabla f$ lie in the same direction at a [[Stationary points for multivariate functions#Distinguishing extrema|stationary point]] of $f$:$$\Huge \underline\nabla f=\lambda\underline\nabla g$$For some $\lambda\in\Re$. Construct the function $\phi=f-\lambda g$, then at the stationary point, $\underline\nabla \phi=\underline\nabla(f-\lambda g)=\underline\nabla f-\lambda\underline\nabla g=0$, therefore $\phi$ has an unconstrained stationary point. Then computing $\frac{\partial\phi}{\partial x}=0,\frac{\partial\phi}{\partial y}=0$ and using the original constraint, $g(x,y)=0$, we have three unknowns and three equations to use. Example:![[constrained optimisation example]]This method of lagrange multipliers can be extended functions of $n$ variables with potentially more than one constraint. Let the function be given by $f(x_1,\dots,x_n)$ and each constraint given by $g_i(x_1,\dots,x_n)$ where $i$ runs from $1$ to $m<n$. The general constraint surface will be an $n-m$ dimensional surface in $\Re^n$, so require $m<n$ otherwise this will be constrained to a point if $m=n$ and there will be no solutions if $m>n$. 

Let $P$ be a point on such a surface, $\Re^n$ can then be divided into two subspaces: $V$, the $m$ dimensional subspace that is spanned by all vectors $\underline\nabla g_i$ evaluated at $P$, and $V^C$, the $n-m$ dimensional subspace which is the orthogonal complement to $V$, consisting of all vectors orthogonal to every $\underline\nabla g_i$. You can then move infinitessimly in the direction $\underline{\hat n}$ while staying on the surface, preseving constraints $g_i(x_1,\dots,x_n)=0$. Since these constraints remain unchanged through this movement, we say that $\underline{\hat n}\cdot\underline\nabla g_i=0$ for all $1\leq i\leq m$, so it follows that $\underline{\hat n}\in V^C$. If we are at an extrema of $f(x_1,\dots,x_n)$ on the constraint surface, then $f$ must not change when moving in a tangent plane to the constraint surface, that is $\underline{\hat n}\cdot\underline\nabla f=0$ if $\underline{\hat n}\in V^C$. This implies that $\underline\nabla f\in V$, this vector space is spanned by $\underline\nabla g_i$, so $\underline\nabla f$ can be written as a linear combination:$$\Huge \underline\nabla f=\lambda_1\underline\nabla g_i+\dots+\lambda_m\underline\nabla g_m\implies\phi=f-\sum_{i=1}^m\lambda_ig_i$$Such that:$$\Huge \underline\nabla\phi=\underline\nabla f-\sum_{i=1}^m\lambda_i\underline\nabla g_i=0$$The problem then becomes finding unconstrained stationary points of $\phi$. $m$ Lagrange multipliers have been introduced, and the function is of $n$ variables, so there are $m+n$ variables to solve for. We get $n$ equations from:$$\Huge \underline\nabla\phi=\left(\frac{\partial\phi}{\partial x_1},\dots,\frac{\partial \phi}{\partial x_n}\right)=0$$And we have originally $m$ constraint equations. We have exactly $m+n$ variables to solve for, and $n+m$ equations to do so with.